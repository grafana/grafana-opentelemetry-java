{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:best-practices", "config:recommended"],
  branchPrefix: "grafanarenovatebot/",
  platformCommit: "enabled",
  automerge: true,
  dependencyDashboard: true,
  forkProcessing: "enabled",
  rebaseWhen: "behind-base-branch",
  labels: ["dependencies"],
  packageRules: [
    {
      matchUpdateTypes: ["major"],
      addLabels: ["update-major"],
    },
    {
      matchUpdateTypes: ["minor"],
      addLabels: ["update-minor"],
    },
    {
      matchUpdateTypes: ["patch"],
      addLabels: ["automerge-patch"],
    },
    {
      matchUpdateTypes: ["digest"],
      addLabels: ["update-digest"],
    },
    {
      matchPackageNames: [
        "ghcr.io/renovatebot/renovate",
        "renovatebot/github-action",
      ],
      groupName: "renovatebot",
      schedule: ["before 4am on monday"],
    },
    {
      matchPackageNames: [
        "super-linter/super-linter",
        "ghcr.io/super-linter/super-linter",
      ],
      groupName: "super-linter",
    },
    {
      matchPackageNames: ["grafana/shared-workflows"],
      versioning: "regex:^(?<compatibility>[a-z-]+)-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$",
    },
    {
      matchPackageNames: ["io.opentelemetry.javaagent:opentelemetry-javaagent"],
      // replace the "dependencies" label with "update-upstream"
      labels: ["update-upstream"],
    },
  ],
  vulnerabilityAlerts: {
    enabled: true,
    addLabels: ["automerge-security-update"],
  },
  osvVulnerabilityAlerts: true,
  customManagers: [
    {
      customType: "regex",
      description: "Update _VERSION variables in mise.toml",
      fileMatch: ["/^mise\\.toml$/"],
      matchStrings: [
        '# renovate: datasource=(?<datasource>[a-z-]+?)(?: depName=(?<depName>.+?))?(?: packageName=(?<packageName>.+?))?(?: versioning=(?<versioning>[a-z-]+?))?\\s.+?_VERSION="?(?<currentValue>[^@"]+?)(?:@(?<currentDigest>sha256:[a-f0-9]+))?"?\\s',
      ],
    },
  ],
}
