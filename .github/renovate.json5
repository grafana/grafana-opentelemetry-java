{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:best-practices", "config:recommended"],
  platformCommit: "enabled",
  automerge: true,
  labels: ["dependencies"],
  packageRules: [
    {
      matchPackageNames: ["grafana/shared-workflows"],
      versioning: "regex:^(?<compatibility>[a-z-]+)-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)?$",
    },
    {
      matchPackageNames: ["io.opentelemetry.javaagent:opentelemetry-javaagent"],
      // replace the "dependencies" label with "update-upstream"
      labels: ["update-upstream"],
    },
    {
      // avoid double updates from the built-in Docker manager and the custom regex manager
      matchManagers: ["dockerfile"],
      matchPackageNames: [
        "us-docker.pkg.dev/grafanalabs-global/docker-grafana-opentelemetry-java-prod/grafana-opentelemetry-java",
      ],
      enabled: false,
    },
  ],
  customManagers: [
    {
      customType: "regex",
      description: "Update _VERSION variables in mise.toml and Dockerfiles",
      managerFilePatterns: ["/^mise\\.toml$/", "/Dockerfile/"],
      matchStrings: [
        '# renovate: datasource=(?<datasource>[a-z-]+?)(?: depName=(?<depName>.+?))?(?: packageName=(?<packageName>.+?))?(?: versioning=(?<versioning>[a-z-]+?))?\\s.+?_VERSION="?(?<currentValue>[^@"]+?)(?:@(?<currentDigest>sha256:[a-f0-9]+))?"?\\s',
      ],
    },
  ],
}
