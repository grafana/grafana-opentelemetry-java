[tools]
java = "temurin-25.0.1+8.0.LTS"
lychee = "0.22.0"

[env]
# renovate: datasource=docker depName=ghcr.io/super-linter/super-linter
SUPER_LINTER_VERSION="v8.4.0@sha256:c5e3307932203ff9e1e8acfe7e92e894add6266605b5d7fb525fb371a59a26f4"

[tasks.build]
description = "Build the Java project"
run = "./gradlew build"

# Lint tasks - using remote scripts from Grafana and OpenTelemetry repos
[tasks."lint:super-linter"]
description = "Run Super-Linter with auto-fix on the repository"
file = "https://raw.githubusercontent.com/grafana/docker-otel-lgtm/f5d39ffaf01b5bbe815b3821e4e3257db32f49e7/.mise/tasks/lint/super-linter.sh"

[tasks."lint:links"]
description = "Lint all links in the repository"
file = "https://raw.githubusercontent.com/open-telemetry/opentelemetry-java-contrib/refs/heads/main/.mise/tasks/lint/links.sh"

[tasks."lint:local-links"]
description = "Lint local file:// links"
file = "https://raw.githubusercontent.com/open-telemetry/opentelemetry-java-contrib/refs/heads/main/.mise/tasks/lint/local-links.sh"

[tasks."lint:links-in-modified-files"]
description = "Lint links in modified files"
file = "https://raw.githubusercontent.com/open-telemetry/opentelemetry-java-contrib/refs/heads/main/.mise/tasks/lint/links-in-modified-files.sh"

[tasks."lint:links-in-modified-files-ci"]
description = "Lint links in modified files (CI configuration)"
run = "mise run lint:links-in-modified-files --base origin/$GITHUB_BASE_REF --head $GITHUB_HEAD_SHA"

[tasks."lint:links-in-modified-files-local"]
description = "Lint links in modified files (local configuration)"
run = "mise run lint:links-in-modified-files --base origin/main --head HEAD"

[tasks."lint:rest"]
description = "All lints not covered by super linter"
depends = ["lint:local-links", "lint:links-in-modified-files-local"]

[tasks."lint:rest-ci"]
description = "All lints not covered by super linter (CI configuration)"
depends = ["lint:local-links", "lint:links-in-modified-files-ci"]

[tasks."lint:all"]
description = "All lints"
depends = ["lint:rest", "lint:super-linter"]
